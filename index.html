<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aplicativo - Calidad del Software (Omar Arias, CUN)</title>
  <meta name="description" content="Aplicativo interactivo para evaluar la calidad del software. Modelo basado en ISO/IEC 25010.">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card { background: white; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
    .metric-input { width: 100%; }
    pre { white-space: pre-wrap; }
  </style>
  <!-- Chart.js for radar chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-slate-50 text-slate-800 leading-relaxed">
  <header class="bg-white border-b py-4 sticky top-0 z-20">
    <div class="container mx-auto px-6 flex items-center justify-between">
      <h1 class="text-xl font-bold">Aplicativo: Calidad del Software</h1>
      <nav class="flex gap-3 text-sm">
        <a href="#normas" class="hover:underline">Normas</a>
        <a href="#modelos" class="hover:underline">Modelos</a>
        <a href="#estandares" class="hover:underline">Estándares</a>
        <a href="#codigo" class="hover:underline">Código</a>
        <a href="#pruebas" class="hover:underline">Pruebas</a>
        <a href="#conclusiones" class="hover:underline">Conclusiones</a>
        <a href="#recomendaciones" class="hover:underline">Recomend.</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-6 py-8 grid grid-cols-1 lg:grid-cols-4 gap-6">
    <!-- Left: summary & links -->
    <aside class="lg:col-span-1 card p-6">
      <h2 class="text-lg font-semibold mb-2">Resumen</h2>
      <p class="text-sm text-slate-600 mb-3">Herramienta interactiva que implementa un modelo métrico para evaluar la calidad del software en 8 dimensiones (ISO/IEC 25010 adaptado). Introduce sub-métricas y obtén una nota 0–5.</p>
      <p class="text-sm"><strong>Autor:</strong> Omar Arias</p>
      <p class="text-sm"><strong>Institución:</strong> Corporación Unificada Nacional de Educación Superior (CUN)</p>
      <hr class="my-4" />
      <h3 class="font-semibold">Acciones rápidas</h3>
      <ul class="text-sm list-disc list-inside mt-2 text-slate-600">
        <li>Rellena las sub-métricas en el formulario.</li>
        <li>Presiona <strong>Calcular</strong> para ver la nota y el radar.</li>
        <li>Descarga resultados con <strong>Exportar JSON</strong>.</li>
      </ul>
      <hr class="my-4" />
      <button id="resetBtn" class="bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600">Restablecer valores</button>
    </aside>

    <!-- Center-left: inputs -->
    <section class="lg:col-span-2 card p-6">
      <h2 class="text-lg font-semibold mb-2">Entradas: Sub-métricas</h2>
      <p class="text-sm text-slate-600 mb-4">Rellena los valores. Los campos en % aceptan 0–100.</p>
      <form id="metricsForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- (inputs same as before) -->
        <div>
          <h4 class="font-medium">Funcionalidad</h4>
          <label class="block text-xs text-slate-500">Cobertura de requisitos (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="f_req" type="number" min="0" max="100" value="90" />
          <label class="block text-xs text-slate-500 mt-2">Tests funcionales pasados (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="f_tests" type="number" min="0" max="100" value="92" />
        </div>

        <div>
          <h4 class="font-medium">Fiabilidad</h4>
          <label class="block text-xs text-slate-500">Fallos por 100 horas (número)</label>
          <input class="metric-input border rounded px-3 py-2" id="r_faults" type="number" min="0" value="2" />
          <label class="block text-xs text-slate-500 mt-2">MTTR (horas)</label>
          <input class="metric-input border rounded px-3 py-2" id="r_mttr" type="number" step="0.1" min="0" value="1.2" />
        </div>

        <div>
          <h4 class="font-medium">Usabilidad</h4>
          <label class="block text-xs text-slate-500">SUS (0–100)</label>
          <input class="metric-input border rounded px-3 py-2" id="u_sus" type="number" min="0" max="100" value="78" />
          <label class="block text-xs text-slate-500 mt-2">Tiempo medio de tarea (segundos)</label>
          <input class="metric-input border rounded px-3 py-2" id="u_time" type="number" min="0" value="35" />
        </div>

        <div>
          <h4 class="font-medium">Eficiencia</h4>
          <label class="block text-xs text-slate-500">Tiempo respuesta medio (ms)</label>
          <input class="metric-input border rounded px-3 py-2" id="e_resp" type="number" min="0" value="450" />
          <label class="block text-xs text-slate-500 mt-2">Uso recursos (0–100)</label>
          <input class="metric-input border rounded px-3 py-2" id="e_res" type="number" min="0" max="100" value="80" />
        </div>

        <div>
          <h4 class="font-medium">Mantenibilidad</h4>
          <label class="block text-xs text-slate-500">Cobertura unit tests (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="m_cov" type="number" min="0" max="100" value="65" />
          <label class="block text-xs text-slate-500 mt-2">Complejidad ciclomática media</label>
          <input class="metric-input border rounded px-3 py-2" id="m_cyc" type="number" step="0.1" min="0" value="3.2" />
        </div>

        <div>
          <h4 class="font-medium">Portabilidad</h4>
          <label class="block text-xs text-slate-500">Plataformas soportadas (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="p_plat" type="number" min="0" max="100" value="80" />
          <label class="block text-xs text-slate-500 mt-2">Facilidad despliegue (0–100)</label>
          <input class="metric-input border rounded px-3 py-2" id="p_deploy" type="number" min="0" max="100" value="85" />
        </div>

        <div>
          <h4 class="font-medium">Seguridad</h4>
          <label class="block text-xs text-slate-500">Vulnerabilidades críticas (número)</label>
          <input class="metric-input border rounded px-3 py-2" id="s_vuln" type="number" min="0" value="0" />
          <label class="block text-xs text-slate-500 mt-2">Checklist implementado (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="s_check" type="number" min="0" max="100" value="80" />
        </div>

        <div>
          <h4 class="font-medium">Compatibilidad / Interoperabilidad</h4>
          <label class="block text-xs text-slate-500">APIs conformes (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="c_api" type="number" min="0" max="100" value="95" />
          <label class="block text-xs text-slate-500 mt-2">Tests integración (%)</label>
          <input class="metric-input border rounded px-3 py-2" id="c_int" type="number" min="0" max="100" value="90" />
        </div>

      </form>

      <div class="flex gap-2 mt-4">
        <button id="calcBtn" type="button" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Calcular</button>
        <button id="exportBtn" type="button" class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700">Exportar JSON</button>
      </div>

      <hr class="my-6" />

      <div id="chartCard" class="card p-4">
        <h3 class="font-semibold mb-2">Radar: Desglose por dimensión</h3>
        <canvas id="radarChart" height="300"></canvas>
      </div>
    </section>

    <!-- Right: results & videos -->
    <aside class="lg:col-span-1 card p-6">
      <h2 class="text-lg font-semibold mb-2">Resultados</h2>
      <div id="resultsArea" class="text-sm text-slate-700 space-y-3">
        <p class="text-slate-500">Aún no se han calculado resultados.</p>
      </div>
      <hr class="my-4" />
      <h3 class="font-semibold">Nota final (0–5)</h3>
      <div id="finalScore" class="text-4xl font-bold text-indigo-600 mt-2">—</div>
      <div class="mt-4" id="interpretation"></div>

      <hr class="my-4" />
      <h3 class="font-semibold">Videos de ejemplo</h3>
      <p class="text-xs text-slate-500 mb-2">Ejemplos públicos sobre calidad de software y pruebas (sustituye por tus grabaciones).</p>
      <!-- Example YouTube embeds -->
      <div class="space-y-3">
        <iframe width="100%" height="150" src="https://www.youtube.com/embed/3X0iV5b8X9s" title="Software Quality - Overview" frameborder="0" allowfullscreen></iframe>
        <iframe width="100%" height="150" src="https://www.youtube.com/embed/2zXj6Y1m7WQ" title="Software Testing Tutorial" frameborder="0" allowfullscreen></iframe>
        <iframe width="100%" height="150" src="https://www.youtube.com/embed/9s3y6yDq3W8" title="Usability Testing" frameborder="0" allowfullscreen></iframe>
      </div>
    </aside>

    <!-- Full width: detailed sections -->
    <section class="lg:col-span-4 card p-6 mt-4" id="normas">
      <h2 class="text-xl font-semibold">Normas</h2>
      <p class="text-sm text-slate-700 mt-2">Se incluyen referencias y descripciones cortas de las normas clave: ISO/IEC 25010 (características de calidad), ISO/IEC 27001 (seguridad de la información) y pautas de accesibilidad (WCAG). Estas normas guían la selección de dimensiones y sub-métricas.</p>
    </section>

    <section class="lg:col-span-4 card p-6 mt-4" id="modelos">
      <h2 class="text-xl font-semibold">Modelos</h2>
      <p class="text-sm text-slate-700 mt-2">El modelo métrico utilizado pondera ocho dimensiones (ver tabla). Cada dimensión se puntúa en 0–100 y la suma ponderada se convierte a 0–5 multiplicando por 0.05. Las fórmulas y mapeos lineales se implementan en el código JS del aplicativo.</p>
    </section>

    <section class="lg:col-span-4 card p-6 mt-4" id="estandares">
      <h2 class="text-xl font-semibold">Estándares y buenas prácticas</h2>
      <p class="text-sm text-slate-700 mt-2">Convenciones de código, control de versiones, pruebas automatizadas, revisión de dependencias y políticas de despliegue continuo. Recomendamos linters, cobertura mínima de pruebas y pipelines de CI/CD.</p>
    </section>

    <section class="lg:col-span-4 card p-6 mt-4" id="codigo">
      <h2 class="text-xl font-semibold">Código y programación</h2>
      <p class="text-sm text-slate-700 mt-2">El proyecto utiliza HTML, TailwindCSS y JavaScript puro para la calculadora. Las funciones de puntuación están implementadas en el archivo principal (inline) para facilitar la portabilidad. Se recomienda mantener el repo actualizado y documentado.</p>
      <p class="text-sm mt-2"><strong>Repositorio:</strong> https://github.com/omarariasc-ui/Aplicativo-Calidad-del-Software</p>
    </section>

    <section class="lg:col-span-4 card p-6 mt-4" id="pruebas">
      <h2 class="text-xl font-semibold">Pruebas y evaluación</h2>
      <p class="text-sm text-slate-700 mt-2">Aquí se deben colocar tablas de resultados, logs de tests y capturas. El aplicativo permite exportar los inputs y resultados en JSON para integrar con hojas de cálculo o informes.</p>
    </section>

    <section class="lg:col-span-4 card p-6 mt-4" id="conclusiones">
      <h2 class="text-xl font-semibold">Conclusiones</h2>
      <p class="text-sm text-slate-700 mt-2">El modelo facilita una evaluación objetiva y reproducible. En el ejemplo inicial (EduLearn) la nota fue 4.03/5, indicando buena calidad pero con margen de mejora en fiabilidad y cobertura de pruebas.</p>
    </section>

    <section class="lg:col-span-4 card p-6 mt-4" id="recomendaciones">
      <h2 class="text-xl font-semibold">Recomendaciones</h2>
      <ol class="list-decimal list-inside mt-2 text-sm text-slate-700">
        <li>Aumentar cobertura de pruebas unitarias a >80%.</li>
        <li>Implementar monitoreo en producción para reducir fallos.</li>
        <li>Realizar pruebas de usabilidad periódicas.</li>
        <li>Fortalecer checklist de seguridad.</li>
        <li>Automatizar despliegues y pruebas de integración.</li>
      </ol>
    </section>

  </main>

  <footer class="text-center py-6 text-sm text-slate-500">
    Proyecto para Corporación Unificada Nacional de Educación Superior (CUN) — Omar Arias — 2025
  </footer>

  <script>
    const WEIGHTS = { funcionalidad: 0.18, fiabilidad: 0.15, usabilidad: 0.15, eficiencia: 0.12, mantenibilidad: 0.10, portabilidad: 0.08, seguridad: 0.12, compatibilidad: 0.10 };
    const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
    function scoreFunc(covReqPct, testsPct){ return clamp(covReqPct,0,100)*0.6 + clamp(testsPct,0,100)*0.4; }
    function scoreReliability(faultsPer100h, mttrHours){ let faultsScore= faultsPer100h<=0?100: faultsPer100h<=1?90: faultsPer100h<=2?70: faultsPer100h<=5?30:10; let mttrScore= mttrHours<=0?100: mttrHours<=1?90: mttrHours<=2?75: mttrHours<=5?40:20; return (faultsScore*0.5 + mttrScore*0.5); }
    function scoreUsability(sus, timeSec){ const susScore=clamp(sus,0,100); let timeScore; if(timeSec<=30) timeScore=100; else if(timeSec<=60) timeScore=50 + (60-timeSec)/30*50; else if(timeSec<=120) timeScore=Math.max(0,50 - (timeSec-60)/60*50); else timeScore=0; return susScore*0.6 + timeScore*0.4; }
    function scoreEfficiency(respMs, resourcePct){ let respScore = respMs<=500?100: respMs<=1000?50 + (1000-respMs)/500*50: respMs<=3000? Math.max(0,50 - (respMs-1000)/2000*50):0; const resScore = clamp(resourcePct,0,100); return (respScore + resScore)/2; }
    function scoreMaintainability(unitCovPct, cyclomatic){ const covScore = clamp(unitCovPct,0,100); let cycScore= cyclomatic<=2?100: cyclomatic<=5?100 - (cyclomatic-2)/3*40: cyclomatic<=10? Math.max(20,60 - (cyclomatic-5)/5*40):10; return (covScore*0.6 + cycScore*0.4); }
    function scorePortability(platPct, deployPct){ return (clamp(platPct,0,100) + clamp(deployPct,0,100))/2; }
    function scoreSecurity(vulnCount, checklistPct){ let vulnScore = vulnCount<=0?100: vulnCount===1?80: vulnCount===2?60: vulnCount<=5?20:5; return vulnScore*0.6 + clamp(checklistPct,0,100)*0.4; }
    function scoreCompatibility(apiPct, intPct){ return (clamp(apiPct,0,100) + clamp(intPct,0,100))/2; }

    function calculateAll(){
      const f_req = Number(document.getElementById('f_req').value||0); const f_tests = Number(document.getElementById('f_tests').value||0);
      const r_faults = Number(document.getElementById('r_faults').value||0); const r_mttr = Number(document.getElementById('r_mttr').value||0);
      const u_sus = Number(document.getElementById('u_sus').value||0); const u_time = Number(document.getElementById('u_time').value||0);
      const e_resp = Number(document.getElementById('e_resp').value||0); const e_res = Number(document.getElementById('e_res').value||0);
      const m_cov = Number(document.getElementById('m_cov').value||0); const m_cyc = Number(document.getElementById('m_cyc').value||0);
      const p_plat = Number(document.getElementById('p_plat').value||0); const p_deploy = Number(document.getElementById('p_deploy').value||0);
      const s_vuln = Number(document.getElementById('s_vuln').value||0); const s_check = Number(document.getElementById('s_check').value||0);
      const c_api = Number(document.getElementById('c_api').value||0); const c_int = Number(document.getElementById('c_int').value||0);

      const score_func = scoreFunc(f_req,f_tests); const score_fiab = scoreReliability(r_faults,r_mttr); const score_usab = scoreUsability(u_sus,u_time);
      const score_efic = scoreEfficiency(e_resp,e_res); const score_mant = scoreMaintainability(m_cov,m_cyc); const score_port = scorePortability(p_plat,p_deploy);
      const score_seg = scoreSecurity(s_vuln,s_check); const score_comp = scoreCompatibility(c_api,c_int);

      const weighted = score_func*WEIGHTS.funcionalidad + score_fiab*WEIGHTS.fiabilidad + score_usab*WEIGHTS.usabilidad + score_efic*WEIGHTS.eficiencia + score_mant*WEIGHTS.mantenibilidad + score_port*WEIGHTS.portabilidad + score_seg*WEIGHTS.seguridad + score_comp*WEIGHTS.compatibilidad;
      const final0_5 = (weighted/100)*5;

      document.getElementById('resultsArea').innerHTML = `<div><strong>Desglose por dimensión (0–100):</strong></div><div>Funcionalidad: ${score_func.toFixed(1)}</div><div>Fiabilidad: ${score_fiab.toFixed(1)}</div><div>Usabilidad: ${score_usab.toFixed(1)}</div><div>Eficiencia: ${score_efic.toFixed(1)}</div><div>Mantenibilidad: ${score_mant.toFixed(1)}</div><div>Portabilidad: ${score_port.toFixed(1)}</div><div>Seguridad: ${score_seg.toFixed(1)}</div><div>Compatibilidad: ${score_comp.toFixed(1)}</div>`;
      document.getElementById('finalScore').textContent = final0_5.toFixed(2);
      const interp = document.getElementById('interpretation'); let text;
      if(final0_5 >= 4.0) text = '<span class="text-green-600 font-semibold">Excelente</span>'; else if(final0_5 >=3.0) text = '<span class="text-amber-600 font-semibold">Bueno</span>'; else if(final0_5 >=2.0) text = '<span class="text-orange-600 font-semibold">Regular</span>'; else text = '<span class="text-red-600 font-semibold">Deficiente</span>';
      interp.innerHTML = `Interpretación: ${text}`;

      // update radar chart
      updateRadar([score_func, score_fiab, score_usab, score_efic, score_mant, score_port, score_seg, score_comp]);

      return { weighted, final0_5, breakdown: { funcionalidad: score_func, fiabilidad: score_fiab, usabilidad: score_usab, eficiencia: score_efic, mantenibilidad: score_mant, portabilidad: score_port, seguridad: score_seg, compatibilidad: score_comp } };
    }

    // Export JSON
    document.getElementById('exportBtn').addEventListener('click', ()=>{
      const data = calculateAll();
      const payload = { metadata: { author: 'Omar Arias', institution: 'CUN', date: new Date().toISOString() }, inputs: Object.fromEntries(new FormData(document.getElementById('metricsForm')).entries()), results: data };
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'evaluacion_calidad_software.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    document.getElementById('calcBtn').addEventListener('click', ()=> calculateAll());
    document.getElementById('resetBtn').addEventListener('click', ()=>{ document.getElementById('metricsForm').reset(); document.getElementById('resultsArea').innerHTML = '<p class="text-slate-500">Aún no se han calculado resultados.</p>'; document.getElementById('finalScore').textContent = '—'; document.getElementById('interpretation').innerHTML = ''; updateRadar([0,0,0,0,0,0,0,0]); });

    // Radar chart setup
    const ctx = document.getElementById('radarChart').getContext('2d');
    let radarChart = new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ['Funcionalidad','Fiabilidad','Usabilidad','Eficiencia','Mantenibilidad','Portabilidad','Seguridad','Compatibilidad'],
        datasets: [{ label: 'Puntuación (0–100)', data: [0,0,0,0,0,0,0,0], fill: true, tension: 0.3 }]
      },
      options: { scales: { r: { suggestedMin: 0, suggestedMax: 100, ticks: { stepSize: 20 } } }, plugins: { legend: { display: false } } }
    });

    function updateRadar(values){ radarChart.data.datasets[0].data = values; radarChart.update(); }

    // Auto-calc on load
    window.addEventListener('DOMContentLoaded', ()=> calculateAll());
  </script>
</body>
</html>
